language: perl
perl:
  - "5.26"
  - "5.24"
  - "5.22"
  - "5.20"
  - "5.18"
  - "5.16"
  - "5.14"
  - "5.12"
  - "5.10"
addons:
  mysql: "5.6"
  apt:
    packages:
      - libaio-dev
      - libnuma-dev
      - libjemalloc-dev
      - libmysqlclient-dev
      - libmysqld-dev
      - libwrap0-dev
      - libstdc++5
before_install:
 - sudo apt-get update -qq
 - sudo apt-get install -qq libmysqlclient-dev libmysqld-dev libwrap0-dev libaio-dev
 - perlbrew install-cpanm -f
before_script:
  - mysql -e 'create database myapp_test default character set utf8 default collate utf8_general_ci;'
env:
  global:
    - "HARNESS_OPTIONS=j1 TEST_ONLINE_mysql=mysql://root@/myapp_test"
install:
  - "cpanm --quiet DBI DBD::mysql"
  - "cpanm --quiet Mojo::mysql"
  - "cpanm -n Test::Pod Test::Pod::Coverage"
  - "cpanm -n --installdeps ."
script: prove -lvr t
sudo: false
notifications:
  email: false
